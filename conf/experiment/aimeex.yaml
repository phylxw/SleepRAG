# conf/experiment/aimeex.yaml
# ç”¨é€”: ä½¿ç”¨ MATH æ„å»ºè®°å¿†åº“ï¼Œå»æµ‹è¯•åˆå¹¶åçš„ AIME å†å¹´çœŸé¢˜é›†
tag: "aimeex"
corpus: "MATH"
mode: "rag" # å»ºè®®è®¾ä¸º 'rag' æˆ– 'all' æ‰èƒ½çœ‹åˆ°ä¼˜åŒ–æ•ˆæœï¼Œè®¾ä¸º 'baseline' ä¸ä¼šç”¨ä¼˜åŒ–åçš„è®°å¿†

# 1. è®°å¿†åº“é…ç½® (Corpus)
# ä¿æŒä¸å˜ï¼Œè¿˜æ˜¯ç”¨ MATH ä½œä¸ºçŸ¥è¯†åº•åº§
corpus_dataset_name: "qwedsacf/competition_math"
corpus_dataset_config: null
corpus_split: "train"

# 2. æµ‹è¯•é›†é…ç½® (Test)
# ğŸ”¥ [å…³é”®ä¿®æ”¹] æ”¹ä¸ºæŒ‡å‘æˆ‘ä»¬åˆšåˆšæ‰‹åŠ¨ç”Ÿæˆçš„åˆå¹¶æ•°æ®é›†
# æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬ç”¨ "Custom/" å‰ç¼€æ¥è§¦å‘æˆ‘ä»¬è„šæœ¬é‡Œçš„ç‰¹æ®Šå¤„ç†é€»è¾‘
# å®é™…ä¸Šä¼šå»è¯»å– root ç›®å½•ä¸‹çš„ hmmt_merged_test_data.jsonl
test_dataset_name: "Custom/aime_merged" 
test_dataset_config: null
test_split: "test" # é€šå¸¸è¯„ä¼°ç”¨ test split

visualize_memory: True

# å­—æ®µæ˜ å°„
# æˆ‘ä»¬è‡ªå·±çš„åˆå¹¶è„šæœ¬å·²ç»æŠŠå­—æ®µè½¬æˆäº† question/golden_answers
# ä½†ä¸ºäº†å…¼å®¹å¯èƒ½è¯»å–çš„ MATH åº“ï¼Œä¿æŒåŸæ˜ å°„é€šå¸¸æ²¡é—®é¢˜ï¼Œæˆ–è€…æ ¹æ® prepare_data çµæ´»è°ƒæ•´
field_map:
  question: "question" # æˆ‘ä»¬çš„ merge è„šæœ¬ç”Ÿæˆçš„æ˜¯ question
  answer: "golden_answers" # æˆ‘ä»¬çš„ merge è„šæœ¬ç”Ÿæˆçš„æ˜¯ golden_answers

retrieval_method: "bm25"

prompts:
  sys_msg: |
    You are a helpful and expert math assistant. Please solve the following problem carefully. Put your final answer within \\boxed{}.
    Let's think step by step.
  
  rag_system: |
    <|im_start|>system
    You are a brilliant mathematics competition expert.
    
    I have retrieved some similar solved problems to help you. Use the logic from these examples just as a reference, solve the NEW question independently.
    
    [RETRIEVED REFERENCES]
    <references>
    {reference}
    </references>
    
    [INSTRUCTIONS]
    1. REASONING: Think step-by-step. Break down the problem logically.
    2. FORMAT: Use fractions instead of decimals.
    3. FINAL ANSWER: You MUST put the final result inside \boxed{{}}. Example: \boxed{{42}} or \boxed{{\frac{{1}}{{2}}}}.
    <|im_end|>
    <|im_start|>user
    {question}
    <|im_end|>
    <|im_start|>assistant
    Let's think step by step.