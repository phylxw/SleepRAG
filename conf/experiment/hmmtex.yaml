# conf/experiment/hmmtex.yaml
# ç”¨é€”: ä½¿ç”¨ MATH æ„å»ºè®°å¿†åº“ï¼Œå»æµ‹è¯•åˆå¹¶åçš„ HMMT å†å¹´çœŸé¢˜é›†
tag: "hmmtex"
mode: "rag" # å»ºè®®è®¾ä¸º 'rag' æˆ– 'all' æ‰èƒ½çœ‹åˆ°ä¼˜åŒ–æ•ˆæœï¼Œè®¾ä¸º 'baseline' ä¸ä¼šç”¨ä¼˜åŒ–åçš„è®°å¿†

# 1. è®°å¿†åº“é…ç½® (Corpus)
# ä¿æŒä¸å˜ï¼Œè¿˜æ˜¯ç”¨ MATH ä½œä¸ºçŸ¥è¯†åº•åº§
corpus_dataset_name: "DigitalLearningGmbH/MATH-lighteval"
corpus_dataset_config: "algebra"
corpus_split: "train"

# 2. æµ‹è¯•é›†é…ç½® (Test)
# ğŸ”¥ [å…³é”®ä¿®æ”¹] æ”¹ä¸ºæŒ‡å‘æˆ‘ä»¬åˆšåˆšæ‰‹åŠ¨ç”Ÿæˆçš„åˆå¹¶æ•°æ®é›†
# æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬ç”¨ "Custom/" å‰ç¼€æ¥è§¦å‘æˆ‘ä»¬è„šæœ¬é‡Œçš„ç‰¹æ®Šå¤„ç†é€»è¾‘
# å®é™…ä¸Šä¼šå»è¯»å– root ç›®å½•ä¸‹çš„ hmmt_merged_test_data.jsonl
test_dataset_name: "Custom/hmmt_merged" 
test_dataset_config: null
test_split: "test" # é€šå¸¸è¯„ä¼°ç”¨ test split

visualize_memory: True

# å­—æ®µæ˜ å°„
# æˆ‘ä»¬è‡ªå·±çš„åˆå¹¶è„šæœ¬å·²ç»æŠŠå­—æ®µè½¬æˆäº† question/golden_answers
# ä½†ä¸ºäº†å…¼å®¹å¯èƒ½è¯»å–çš„ MATH åº“ï¼Œä¿æŒåŸæ˜ å°„é€šå¸¸æ²¡é—®é¢˜ï¼Œæˆ–è€…æ ¹æ® prepare_data çµæ´»è°ƒæ•´
field_map:
  question: "question" # æˆ‘ä»¬çš„ merge è„šæœ¬ç”Ÿæˆçš„æ˜¯ question
  answer: "golden_answers" # æˆ‘ä»¬çš„ merge è„šæœ¬ç”Ÿæˆçš„æ˜¯ golden_answers

retrieval_method: "bm25"

prompts:
  sys_msg : |
    "You are a math expert. Solve the problem in a brief. Don't answer more than 50 words. End your answer with \\boxed{number}."
  
  rag_system: |
        You are a math expert. You can solve math problems in one second to give the correct answer. Below are some similar solved problems. Refer to the logic in these examples to solve the new question.
        
        Solve the problem in a very brief. Don't answer more than 80 tokens. If the problem is easy, You can also just give the final answer. Do not perform unit conversion.
        Try to use fractions instead of decimals.
        âš ï¸ IMPORTANT: You MUST put the final answer within \boxed{{}}. For example: \boxed{{10}} or \boxed{{x \in [-1,1]}}.
        
        {reference}
        
        ### Question:
        {question}
        
        ### Answer:
        Let's think step by step.