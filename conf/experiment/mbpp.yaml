# conf/experiment/humaneval.yaml
# ç”¨é€”: ä½¿ç”¨ MBPP æ„å»ºä»£ç è®°å¿†åº“ï¼Œå»æµ‹è¯• HumanEval ä»£ç ç”Ÿæˆèƒ½åŠ›
tag: "mbpp"
corpus: "mbpp" 
mode: "rag" 

# ==========================================
# 1. è®°å¿†åº“é…ç½® (Corpus)
# ==========================================
# å¼ºçƒˆå»ºè®®: ä»£ç ä»»åŠ¡çš„æ£€ç´¢æºä¹Ÿåº”è¯¥æ˜¯ä»£ç ã€‚
# è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ MBPP (sanitized) çš„è®­ç»ƒé›†ä½œä¸º"å‚è€ƒä¹¦"
corpus_dataset_name: "google-research-datasets/mbpp"
corpus_dataset_config: "sanitized"
corpus_split: "train" 

# ==========================================
# 2. æµ‹è¯•é›†é…ç½® (Test)
# ==========================================
# ğŸ”¥ [å…³é”®] åå­—é‡Œå¿…é¡»å¸¦ "humaneval"ï¼Œè§¦å‘ pre.py çš„ä»£ç è¯„æµ‹é€»è¾‘
test_dataset_name: "google-research-datasets/mbpp"
test_dataset_config: null
test_split: "test" # HumanEval åªæœ‰ test é›†

visualize_memory: True

# ==========================================
# 3. å­—æ®µæ˜ å°„ (Field Map)
# ==========================================
# é’ˆå¯¹ MBPP (Corpus) çš„å­—æ®µæ˜ å°„
# MBPP çš„ç»“æ„æ˜¯: text (é—®é¢˜), code (ç­”æ¡ˆ), test_list (æµ‹è¯•ç”¨ä¾‹)
field_map:
  question: "text"  # æŠŠ MBPP çš„ 'text' å­—æ®µå½“ä½œé—®é¢˜å­˜å…¥ç´¢å¼•
  answer: "code"    # æŠŠ MBPP çš„ 'code' å­—æ®µå½“ä½œç­”æ¡ˆ

retrieval_method: "bm25"

# ==========================================
# 4. Prompt è®¾ç½® (é’ˆå¯¹ Python ç”Ÿæˆä¼˜åŒ–)
# ==========================================
prompts:
  # System Message: è®¾å®šä¸“å®¶èº«ä»½ï¼Œå¼ºè°ƒç”¨ Markdown åŒ…è£¹ä»£ç 
  sys_msg: |
    You are an expert Python programmer. 
    Complete the function provided in the prompt.
    
    IMPORTANT format rules:
    You MUST enclose your code in a markdown block like this:
    ```python
    # Your code here
    ```

  # RAG System Prompt: æ³¨å…¥æ£€ç´¢åˆ°çš„ä»£ç ç‰‡æ®µ
  rag_system: |
    <|im_start|>system
    You are an expert Python programmer.

    I have retrieved some similar programming problems and their solutions to help you.
    Study how they implement logic and handle edge cases, then solve the NEW problem independently.

    [RETRIEVED REFERENCES]
    <references>
    {reference}
    </references>

    [INSTRUCTIONS]
    CRITICAL: You MUST enclose your code in a markdown block like this:
    ```python
    # Your code here
    ```
    <|im_end|>
    <|im_start|>user
    {question}
    <|im_end|>
    <|im_start|>assistant